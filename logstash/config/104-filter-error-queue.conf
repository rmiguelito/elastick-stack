filter {
	if [message] =~ /.*Nao foi possivel enviar a mensagem para fila.*/ {
		grok {
			match => [ 
				"message", "%{TIMESTAMP_ISO8601:[@metadata][timestamp]}.*Nao foi possivel enviar a mensagem para fila: (?<nome_fila>.+)$"
			] 
		}

		mutate {
			add_field => [ "event_type", "error_fila" ]
			add_tag => ["processado"]
		}
	}
}
