filter {
	if [message] =~ /.*Gravação Iniciada: EV_RECORDSTART.*/ {

		grok {
			match => [ 
				"message", "%{TIMESTAMP_ISO8601:[@metadata][timestamp]}.*port:(?<porta>[0-9]+).*Gravação Iniciada: EV_RECORDSTART \| (?<identificador_chamada>[0-9_]+)\s*$"
			] 
		}
		mutate {
			add_field => [ "event_type", "atendimento" ]
			add_tag => ["iniciouAtendimento"]
			add_tag => ["processado"]
			convert => { "porta" => "integer"}
		}
	}
}